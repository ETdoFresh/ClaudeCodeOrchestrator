<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:controls="using:ClaudeCodeOrchestrator.App.Views.Controls"
             mc:Ignorable="d" d:DesignWidth="300" d:DesignHeight="150"
             x:Class="ClaudeCodeOrchestrator.App.Views.Controls.NewTaskInputControl"
             Background="#252526">

    <Border Padding="8" CornerRadius="4" Background="#252526" Margin="4">
        <StackPanel Spacing="8">
            <!-- Task description input -->
            <TextBox x:Name="TaskDescriptionBox"
                     AcceptsReturn="True"
                     TextWrapping="Wrap"
                     Height="60"
                     Watermark="Describe the task for Claude..."
                     Background="#3C3C3C"
                     Foreground="#CCCCCC"
                     BorderBrush="#3F3F46"
                     CaretBrush="#CCCCCC"
                     FontSize="12"
                     AutomationProperties.AutomationId="InlineTaskDescriptionInput" />

            <!-- Image attachments area -->
            <Border x:Name="AttachmentsArea"
                    IsVisible="False"
                    Background="#1E1E1E"
                    CornerRadius="4"
                    Padding="6">
                <StackPanel>
                    <TextBlock Text="Attached Images:"
                               FontSize="10"
                               Foreground="#858585"
                               Margin="0,0,0,4" />
                    <ItemsControl x:Name="AttachmentsPanel">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                    </ItemsControl>
                </StackPanel>
            </Border>

            <!-- Action bar: attach and create buttons -->
            <Grid ColumnDefinitions="Auto,*,Auto">
                <!-- Attach button -->
                <Button Grid.Column="0"
                        x:Name="AttachButton"
                        Content="Attach"
                        Click="AttachButton_Click"
                        Background="#3C3C3C"
                        Foreground="#858585"
                        Padding="6,3"
                        FontSize="11"
                        ToolTip.Tip="Attach images (or paste with Ctrl+V)" />

                <!-- Creating indicator -->
                <StackPanel Grid.Column="1"
                            x:Name="CreatingIndicator"
                            IsVisible="False"
                            Orientation="Horizontal"
                            Spacing="6"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Center">
                    <TextBlock Text="Creating..."
                               FontSize="11"
                               Foreground="#858585"
                               FontStyle="Italic" />
                </StackPanel>

                <!-- Error text -->
                <TextBlock Grid.Column="1"
                           x:Name="ErrorText"
                           Foreground="#F44747"
                           FontSize="11"
                           IsVisible="False"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Center"
                           AutomationProperties.AutomationId="InlineTaskErrorText" />

                <!-- Create button -->
                <Button Grid.Column="2"
                        x:Name="CreateButton"
                        Content="Create Task"
                        Click="Create_Click"
                        Background="#0E639C"
                        Foreground="White"
                        Padding="10,4"
                        FontSize="11"
                        AutomationProperties.AutomationId="InlineTaskCreateButton" />
            </Grid>
        </StackPanel>
    </Border>
</UserControl>
